/*! app.js 2015-10-26 */
angular.module("myApp",["ngRoute","myApp.home"]).config(["$routeProvider",function(a){a.otherwise({redirectTo:"/home"})}]).controller("View1Ctrl",["$scope",function(a){}]),angular.module("myApp.home",["ngRoute"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"home/home.html",controller:"homeController"})}]).controller("homeController",["$scope","$log","$http",function(a,b,c){a.map,a.userpos,a.sitesResults;var d,e,f,g="../assets/images/centerFlag.png",h=[];a.sports={Basketball:"Basketball Court",Soccer:"Soccer Field",Tennis:"Tennis Court",Baseball:"Baseball Field",Softball:"Softball Field",Gym:"Gym","Rock Climbing":"Climbing Gym",Golf:"Golf Course",Racquetball:"Racquetball Court",Squash:"Squash Court"},a.changeLocation=function(a){console.log("change location clicked!"),e=new google.maps.Geocoder,e.geocode({address:a},function(a,b){console.log("GEOCODER RESULTS",a),b==google.maps.GeocoderStatus.OK?j(a[0].geometry.location,14):alert("Location Change Failed because"+b)})};var i=function(){f=new google.maps.Marker({position:a.map.getCenter(),icon:g}),f.setMap(a.map)},j=function(b,c){a.map=new google.maps.Map(document.getElementById("map"),{center:b,zoom:c}),d=new google.maps.InfoWindow,i(),a.map.addListener("center_changed",function(){f.setMap(null),i()})};a.userfind=function(){function b(a,b,c){b.setPosition(c),b.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}var c={lat:37.7833,lng:-122.4167};j(c,12),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){a.userpos={lat:b.coords.latitude,lng:b.coords.longitude};new google.maps.Circle({strokeColor:"#FFFFFF ",strokeOpacity:1,strokeWeight:2,fillColor:"#0000FF ",fillOpacity:.5,map:a.map,center:a.userpos,radius:50});a.map.setCenter(a.userpos),a.map.setZoom(14)},function(){b(!0,infoWindow,a.map.getCenter())}):b(!1,infoWindow,a.map.getCenter()),a.$apply()},a.createMarker=function(b){console.log("anybody?");var c=(b.geometry.location,new google.maps.Marker({map:a.map,position:b.geometry.location}));console.log(b),console.log("INSIDE CREATEMARKER"),c.addListener("click",function(){console.log("MARKER CLICKED!!!"),d.setContent(b.name),d.open(a.map,this)}),h.push(c),console.log("MARKERS ARRAY :",h)},a.siteListClick=function(a){google.maps.event.trigger(h[a],"click")},a.populateList=function(b){function c(b,c){c==google.maps.places.PlacesServiceStatus.OK&&(console.log("callback : ",b),a.sitesResults=b,a.$apply(),b.forEach(function(b){a.createMarker(b)}))}h.forEach(function(a){a.setMap(null)}),h=[],a.sitesResults=[];var d={location:a.map.getCenter(),radius:"2000",keyword:[b]},e=new google.maps.places.PlacesService(a.map);e.nearbySearch(d,c)}}]);